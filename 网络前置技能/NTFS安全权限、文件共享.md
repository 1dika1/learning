### NTFS安全权限

##### 权限概述

1. 设置NTFS权限，实现不同用户访问不同对象（文件、文件夹）的权限
2. 分配正确访问权限后，用户才能访问资源
3. 设置权限防止资源被篡改、删除

##### 文件系统概述

文件系统就是这个分区的存储格式，不建立文件系统就无法存储任何文件

格式化就是重建文件系统

```
FTA      #windows

NTFS     #windows

EXT      #Linux
```

##### NTFS特点

1. 提高磁盘读写性能

2. 可靠性

   ​	加密文件系统

   ​	访问控制列表（设置权限）

3. 磁盘利用率

   ​	压缩

   ​	磁盘配额

4. 支持单个文件大于4g

##### 修改NTFS权限 

###### 取消继承

作用：取消后，可以任意修改权限列表

方法：文件右键属性-安全-高级

###### 权限累加

当用户同时属于多个组，权限是可以累加的

###### 拒绝最大

当用户权限累加时，图遇到拒绝权限，拒绝最大

###### 取得所有权

administrator可以强制获得所有文件(夹)的权限

###### 强制继承

作用 ：对下强制继承父子关系

###### 文件复制剪切对权限的影响

文件复制后，跨分区移动，文件的权限会被目标文件覆盖

文件同分区移动，文件的权限不会被目标文件覆盖

### 文件共享服务器（Cifs）

cifs对内偏多

ftp对外偏多

##### 概述

文件共享服务，提供文件下载和上传服务（类似于FTP）

##### 创建共享

1. 在本地登录时，只受NTFS权限的影响
2. 在远程登录时，将受共享及NTFS权限的共同影响，且取交集。
3. 所以建议设置共享权限为everyone完全控制，然后具体的权限在NTFS中设置即可。

##### 访问共享

1. 在开始运行或我的电脑地址栏中，输入UNC地址：
2.  文件共享服务器IP
3.   文件共享服务器IP\共享名

```
whoami       	#查看当前用户

whoami /user    #查看当前用户的sid

netstat -an    	#查看开放端口
```

##### 隐藏共享

在分享时将分享名后输入$符号（例：key$）

##### 访问隐藏共享的方法

若要查看隐藏分享文件夹，可以手动地址栏后输入隐藏文件夹名 （例：\\10.1.1.2\key$）

##### 本机共享

```
net share				#查看本机所有共享文件

net share 共享名=地址		#创建共享文件

net share 共享名 /del		#删除共享文件
```

##### 屏蔽系统隐藏共享自动产生

1. 打开注册表

   ​	运行 ：“regedit”  打开注册表编辑器

2. 定位共享注册表位置

   定位共享注册表位置：HKEY_Local_MACHINE\System\CurrentControlSet\Services\LanmanServer\Parameters\

    右键新建REG_DWORD类型的AutoShareServer 键，值为 0

##### 关闭455服务

可以通过关闭445服务来屏蔽病毒传入（如：勒索病毒）

###### 方法一

运行“services.msc”

停止并禁用server服务

###### 方法二

禁止被访问445，配置高级安全防火墙-入站规则（win7及其以上系统）

```
3389	#远程桌面

23		#telnet

445		#共享服务 
```

